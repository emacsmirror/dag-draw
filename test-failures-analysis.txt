Warning (package): Package lacks a terminating comment
=== END BOUNDARY CLIPPING TEST ===

Running 474 specs.

dag-draw package
  when creating a new graph
    should create an empty graph (0.32ms)
    should accept optional attributes (0.09ms)
  when adding nodes to a graph
    should add a node with default label (0.14ms)
    should add a node with custom label (0.07ms)
    should add multiple nodes (0.12ms)
  when adding edges to a graph
    should add an edge between existing nodes (0.15ms)
    should add an edge with custom weight (0.06ms)
    should add multiple edges (0.07ms)
  when rendering a simple graph
    should render to SVG format (0.26ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
    should render to ASCII format (1.46ms)
    should render to DOT format (0.18ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node root: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node leaf: (5.0,6.0) rank=2
  acceptance criteria for layout algorithm
    should complete the full layout pipeline without errors (1.84ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node root: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node leaf: (5.0,6.0) rank=2
    should return the same graph instance after layout (1.70ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node root: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node leaf: (5.0,6.0) rank=2
    should produce renderable output after layout (1.81ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 0 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
Network simplex failed (GKNV tight tree expansion failed to converge after 0 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  edge cases and error handling
    should handle empty graphs gracefully (1.25ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node single: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (16,3)
Grid size: 21x10
    should handle single node graphs (0.91ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (20.0,0.0) rank=0
  Node d: (20.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (26,6)
Grid size: 31x11
    should handle disconnected graphs (1.59ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,9)
Grid size: 20x14
    should handle graphs with cycles (1.75ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (50,6)
Grid size: 55x11
    should handle large node labels (1.34ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (22,6)
Grid size: 27x11
    should handle special characters in labels (2.14ms)

Advanced GKNV crossing reduction with weighted median
  weighted median calculation
    should calculate weighted median positions based on edge weights (0.17ms)
  iterative crossing reduction
    should reduce crossings through multiple iterations (0.27ms)

two-layer crossing minimization
  should minimize crossings between two specific layers (0.18ms)

GKNV Aesthetic Principles A1-A4
  A1: Expose hierarchical structure per Section 1.1
    should validate hierarchical structure exposure (0.13ms)
Network simplex optimization: converged in 1 iterations
    should aim edges in same general direction (0.70ms)
    should highlight source and sink nodes (0.11ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=5 crossings=1 converged=t
GKNV A2: Edge crossings detected (3) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (20.0,0.0) rank=0
  Node c: (5.0,3.0) rank=1
  Node d: (20.0,3.0) rank=1
  A2: Avoid visual anomalies per Section 1.1
    should minimize edge crossings (40.40ms)
    should avoid sharp bends in edges (0.23ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node near1: (5.0,0.0) rank=0
  Node near2: (20.0,3.0) rank=1
  Node far: (5.0,3.0) rank=1
  A3: Keep edges short per Section 1.1
    should measure and minimize edge lengths (1.43ms)
    should aid finding related nodes through short edges (0.19ms)
  A4: Favor symmetry and balance per Section 1.1
    should measure layout symmetry (0.18ms)
    should balance node distribution (0.15ms)
Network simplex optimization: converged in 1 iterations
  A1-A4 Integration into Algorithm Decisions
    should integrate aesthetic principles into ranking decisions (0.34ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
    should integrate aesthetic principles into ordering decisions (0.65ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node left: (5.0,0.0) rank=0
  Node center: (5.0,3.0) rank=1
  Node right: (5.0,6.0) rank=2
    should integrate aesthetic principles into positioning decisions (1.04ms)

dag-draw-algorithms minimal tests
  basic DFS
    should perform DFS on simple graph (0.09ms)

dag-draw-algorithms
  depth-first search
    should perform DFS on acyclic graph (0.11ms)
    should classify edges correctly (0.11ms)
  cycle detection
    should detect no cycles in acyclic graph (0.07ms)
    should detect cycles in cyclic graph (0.07ms)
    should handle disconnected components (0.12ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11

=== ARROW PLACEMENT DEBUG ===
┌────────┐          
│Source  │          
└────│───┘          
┌────▼───┐          
│Target  │          
└────────┘          
                    
                    
                    
                    
                    
==============================

Arrows found:
Line 4, pos 5: ’▼’ in ’┌────▼───┐          ’

Edge characters found:
Line 6, pos 9: ’┘’ in ’└────────┘          ’
Line 6, pos 8: ’─’ in ’└────────┘          ’
Line 6, pos 7: ’─’ in ’└────────┘          ’
Line 6, pos 6: ’─’ in ’└────────┘          ’
Line 6, pos 5: ’─’ in ’└────────┘          ’
Line 6, pos 4: ’─’ in ’└────────┘          ’
Line 6, pos 3: ’─’ in ’└────────┘          ’
Line 6, pos 2: ’─’ in ’└────────┘          ’
Line 6, pos 1: ’─’ in ’└────────┘          ’
Line 6, pos 0: ’└’ in ’└────────┘          ’
Line 5, pos 9: ’│’ in ’│Target  │          ’
Line 5, pos 0: ’│’ in ’│Target  │          ’
Line 4, pos 9: ’┐’ in ’┌────▼───┐          ’
Line 4, pos 8: ’─’ in ’┌────▼───┐          ’
Line 4, pos 7: ’─’ in ’┌────▼───┐          ’
Line 4, pos 6: ’─’ in ’┌────▼───┐          ’
Line 4, pos 4: ’─’ in ’┌────▼───┐          ’
Line 4, pos 3: ’─’ in ’┌────▼───┐          ’
Line 4, pos 2: ’─’ in ’┌────▼───┐          ’
Line 4, pos 1: ’─’ in ’┌────▼───┐          ’
Line 4, pos 0: ’┌’ in ’┌────▼───┐          ’
Line 3, pos 9: ’┘’ in ’└────│───┘          ’
Line 3, pos 8: ’─’ in ’└────│───┘          ’
Line 3, pos 7: ’─’ in ’└────│───┘          ’
Line 3, pos 6: ’─’ in ’└────│───┘          ’
Line 3, pos 5: ’│’ in ’└────│───┘          ’
Line 3, pos 4: ’─’ in ’└────│───┘          ’
Line 3, pos 3: ’─’ in ’└────│───┘          ’
Line 3, pos 2: ’─’ in ’└────│───┘          ’
Line 3, pos 1: ’─’ in ’└────│───┘          ’
Line 3, pos 0: ’└’ in ’└────│───┘          ’
Line 2, pos 9: ’│’ in ’│Source  │          ’
Line 2, pos 0: ’│’ in ’│Source  │          ’
Line 1, pos 9: ’┐’ in ’┌────────┐          ’
Line 1, pos 8: ’─’ in ’┌────────┐          ’
Line 1, pos 7: ’─’ in ’┌────────┐          ’
Line 1, pos 6: ’─’ in ’┌────────┐          ’
Line 1, pos 5: ’─’ in ’┌────────┐          ’
Line 1, pos 4: ’─’ in ’┌────────┐          ’
Line 1, pos 3: ’─’ in ’┌────────┐          ’
Line 1, pos 2: ’─’ in ’┌────────┐          ’
Line 1, pos 1: ’─’ in ’┌────────┐          ’
Line 1, pos 0: ’┌’ in ’┌────────┐          ’

SUCCESS: All arrows are properly connected to edge lines
Arrow Placement Debugging
  Simple two-node connection
    should trace edge line endpoints vs arrow positions (1.88ms)

ASCII Box Drawing
  dag-draw--ascii-draw-box
    should draw a simple 3x3 box (0.34ms)
    should draw correct box corners and edges (0.39ms)
    should handle minimum box size of 3x3 (0.26ms)
    should draw larger boxes correctly (0.26ms)
    should handle box at grid boundaries (0.11ms)
    should handle boxes extending beyond grid boundaries (0.12ms)
    should handle negative positions gracefully (0.08ms)
  ASCII Text Placement
    text placement within boxes
      should center short text in box (0.09ms)
      should center single character (0.06ms)
      should handle text that fits exactly (0.09ms)
      should not draw text in boxes too small (0.06ms)
      should truncate text that is too long (0.06ms)
      should not overwrite box borders (0.15ms)
    ASCII Line Drawing
      dag-draw--ascii-draw-line
        should draw horizontal line (0.11ms)
        should draw vertical line (0.09ms)
        should draw L-shaped line (horizontal then vertical) (0.13ms)
        should handle single point line (0.06ms)
        should handle lines going backwards (0.08ms)
        should handle lines outside grid boundaries (0.06ms)
      Complex Box and Text Scenarios
        should handle multiple boxes without interference (0.16ms)
        should handle overlapping boxes gracefully (0.07ms)
        should preserve spacing between non-overlapping elements (0.08ms)
        should handle empty labels (0.08ms)
        should handle nil labels (0.12ms)

Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (60,15)
Grid size: 65x20
ASCII OUTPUT SHOWING TRAMPLING:
┌──────────┐                                                     
│Research  │                                                     
└───────────────────────│──────────────────────│                 
┌──────▼─────┐ ┌────────▼────────┐ ┌───────────▼──────────┐      
│API Design  │ │Database Design  │ │Infrastructure Setup  │      
└────────────│──────────────────────────│─────────────────┘      
┌────────────▼───────────┐ ┌────────────▼────────────┐           
│Backend Implementation  │ │Frontend Implementation  │           
└──────────│─────────────────────────────────────────┘           
┌──────────▼──────────┐                                          
│Integration Testing  │                                          
└──────│──────────────┘                                          
┌──────▼─────┐                                                   
│Deployment  │                                                   
└────────────┘                                                   
                                                                 
                                                                 
                                                                 
                                                                 
                                                                 
ASCII coordinate system fundamental failures
  should prevent node trampling in complex dependency graph (5.16ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node middle: (5.0,3.0) rank=1
  Node bottom: (5.0,6.0) rank=2
GKNV coordinates: Top=0, Middle=3, Bottom=6

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,9)
Grid size: 20x14

=== ASCII OUTPUT ===
┌─────┐             
│Top  │             
└────│┘             
┌────▼───┐          
│Middle  │          
└────│───┘          
┌────▼───┐          
│Bottom  │          
└────────┘          
                    
                    
                    
                    
                    
==================

ASCII Coordinate Preservation
  should preserve hierarchical Y-coordinates in ASCII output  Expected `(length ascii-output)' > 300, but `(length ascii-output)' was 293. (1.72ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (5.0,3.0) rank=1
  Node api: (5.0,6.0) rank=2
  Node backend: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (15,15)
Grid size: 20x20
  should maintain proportional spacing for complex hierarchy  Expected `(length ascii-output)' > 500, but `(length ascii-output)' was 419. (1.94ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node single: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,3)
Grid size: 20x10
Single node ASCII has 10 lines (ASCII character grid)
  should not apply excessive coordinate distortion (0.83ms)


=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,50) to (106,153)
Grid size: 20x108
Current (broken) ASCII output:
┌─────┐             
│Top  │             
└─────┘             
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   │                
   ──│              
┌────▼───┐          
│Bottom  │          
└────────┘          
                    
                    
                    
                    
                    
ASCII Edge Routing Acceptance Tests
  Current State (Broken) - Edge Routing Problems
    demonstrates current broken edge routing from node centers (0.31ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node bottom: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (25,9)
Grid size: 30x14
Complex graph - current broken routing:
┌─────┐                       
│Top  │                       
└───│──────────────│          
┌───▼──┐       ┌───▼───┐      
│Left  │       │Right  │      
└────│─────────────────┘      
┌────▼───┐                    
│Bottom  │                    
└────────┘                    
                              
                              
                              
                              
                              
    shows complex graph edge routing chaos (1.63ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,50) to (106,153)
Grid size: 20x108
  Expected State (Target) - Proper Edge Routing
    should connect edges to node boundaries, not centers (21.79ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,100) to (155,103)
Grid size: 115x10
    should use orthogonal routing with box-drawing characters (10.37ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node source: (20.0,0.0) rank=0
  Node obstacle: (5.0,0.0) rank=0
  Node target: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (26,6)
Grid size: 31x11
    should integrate with spline system for curved routing  Expected `(length ascii-output)' > 400, but `(length ascii-output)' was 351. (2.04ms)
Network simplex optimization: converged in 1 iterations
GKNV A1: Hierarchical structure score 0.67 - consider rank rebalancing
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (6,9)
Grid size: 20x14
    should handle all three edge types properly (9.14ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node ui: (5.0,0.0) rank=0
  Node service: (5.0,3.0) rank=1
  Node data: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (15,9)
Grid size: 20x14
  Visual Quality Standards
    should produce professional-looking output (8.97ms)


=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,100) to (106,103)
Grid size: 20x10
ASCII DAG Integration Tests
  Simple graph rendering
    should render a single node correctly (0.80ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,50) to (101,153)
Grid size: 20x108
    should render two connected nodes correctly (61.37ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (155,153)
Grid size: 115x108

=== DIAMOND TEST DEBUG ===
ASCII OUTPUT:
                                                  ┌─────┐                                                          
                                                  │Top  │                                                          
                                                  └─────┘                                                          
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
    │───────────────────────────────────────────────────────────────────────────────────────────────────│          
┌───▼──┐                                                                                            ┌───▼───┐      
│Left  │                                                                                            │Right  │      
└──────┘                                                                                            └───────┘      
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    │                                                                                                   │          
    ───────────────────────────────────────────────────│─────────────────────────────────────────────────          
                                                  ┌────▼───┐                                                       
                                                  │Bottom  │                                                       
                                                  └────────┘                                                       
                                                                                                                   
                                                                                                                   
                                                                                                                   
                                                                                                                   
                                                                                                                   
Expected 4 nodes: (Bottom Right Left Top)
Found 4 nodes: (Top Left Right Bottom)
Searching for ’Bottom’: found at (51,101)
Searching for ’Right’: found at (101,51)
Searching for ’Left’: found at (1,51)
Searching for ’Top’: found at (51,1)
========================
    should render diamond pattern correctly (2.96s)
Network simplex failed (GKNV tight tree expansion failed to converge after 0 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
    should handle empty graphs gracefully (0.71ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,9)
Grid size: 20x14
  Layout algorithm integration
    should work with full layout pipeline (40.43ms)
Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (2) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node db-design: (20.0,3.0) rank=1
  Node api-design: (5.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (20.0,6.0) rank=2
  Node testing: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (29,15)
Grid size: 34x20
    should handle complex DAG with convergence (42.01ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node small: (5.0,0.0) rank=0
  Node large: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (24,6)
Grid size: 29x11
    should handle graphs with different node sizes (2.34ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
    should produce deterministic output (2.03ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,3)
Grid size: 20x10
  Error handling and edge cases
    should handle nodes without coordinates gracefully (0.92ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (10000,10000) to (10006,10003)
Grid size: 20x10
    should handle very large coordinates (0.12ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (0,0) to (6,3)
Grid size: 20x10
    should handle zero coordinates (0.33ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,100) to (108,103)
Grid size: 20x10
    should handle special characters in labels (0.32ms)

ASCII Grid Creation
  dag-draw--create-ascii-grid
    should create grid with correct dimensions (0.10ms)
    should initialize grid with spaces (0.07ms)
    should handle minimal grid sizes (0.07ms)
    should handle zero dimensions gracefully (0.03ms)
    should handle large grids efficiently (0.09ms)
  Coordinate System and Bounds Calculation
    dag-draw-get-graph-bounds
      should calculate correct bounds for positioned nodes (0.16ms)
      should handle empty graphs (0.11ms)
      should handle single node (0.13ms)
      should handle nodes with zero coordinates (0.12ms)
    ASCII Grid Utilities
      grid manipulation
        should safely set characters within bounds (0.10ms)
        should handle grid boundaries correctly (0.23ms)
      Grid to String Conversion
        dag-draw--ascii-grid-to-string
          should convert simple grid to string (0.13ms)
          should handle empty grid (0.08ms)
          should handle single row (0.07ms)
          should preserve spaces in output (0.07ms)

ASCII Edge Routing - GKNV Algorithm Implementation
  Coordinate System Transformation
    handles coordinate system transformation correctly  Expected `grid-coord' to be within 0.7943282347242815 of 8.0, but instead it was 100.0, with a difference of 92.0 (0.11ms)
  Port Calculation - GKNV Section 5
    calculates correct boundary ports for all four sides (0.49ms)
  Edge Classification - GKNV Algorithm
    correctly classifies inter-rank edges (0.11ms)
    correctly classifies flat edges (same rank) (0.07ms)
    correctly classifies self-edges (loops) (0.08ms)
SPLINE-GEN: Creating inter-rank spline for source->target
SPLINE-GEN: Edge source->target generated 18 spline points
  SPLINE-COORDS: Start: (100.0,110.0) End: (200.0,190.0)
GKNV-NODE: source world(100.0,100.0) → grid(60,80) size(80x40)
GKNV-NODE: target world(200.0,200.0) → grid(260,280) size(80x40)
GKNV-EDGE: source→target world(100.0,110.0)→(200.0,190.0) grid(100,120)→(300,280)
GKNV-PORTS: source port(100,120) → target port(300,280)
  Routing Algorithm - All-or-Nothing Logic
    draws complete L-path when unobstructed  Expected `has-horizontal' to be non-nil, but instead it was nil. (4.24ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node bottom: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (15,6)
Grid size: 20x11
  Visual Quality Standards
    produces clean ASCII output without overlapping node interiors (1.45ms)

ASCII DAG Test Harness
  ASCII grid parsing
    should parse ASCII grid into structured data (0.12ms)
    should identify node boundaries in ASCII grid (0.09ms)
    should extract complete node text content (0.09ms)
    should identify edge connections between nodes (0.16ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (14,3)
Grid size: 20x10
  node validation
    should validate that node text is complete and properly bounded (0.99ms)
    should detect incomplete or missing node text (0.08ms)
    should validate node boundary integrity (0.09ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (6,6)
Grid size: 20x11
  edge connectivity validation
    should validate that edges connect nodes properly (1.27ms)
    should detect broken or incomplete edge paths (0.14ms)
    should validate arrow placement and direction (0.12ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node start: (5.0,0.0) rank=0
  Node middle: (5.0,3.0) rank=1
  Node end: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,9)
Grid size: 20x14
  structural integrity
    should validate overall graph structure matches expected topology (4.81ms)

Auxiliary graph network simplex for X-coordinates
  auxiliary graph construction with Omega factors
    should create auxiliary graph with proper edge weights (0.20ms)
  min-cost flow optimization
    should optimize X-coordinates using network simplex (0.49ms)

GKNV Auxiliary Graph Construction
  proper cost encoding per Section 4.2
    should create n_e edge cost nodes for each original edge (0.20ms)
    should create cost encoding edges (n_e, u) and (n_e, v) (0.48ms)
    should create separation encoding edges with proper constraints (0.48ms)


=== BOUNDARY CLIPPING TEST ===
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
ASCII Output with Boundary Clipping:
┌────────┐          
│Source  │          
└────│───┘          
┌────▼───┐          
│Target  │          
└────────┘          
                    
                    
                    
                    
                    

Analyzing output for boundary patterns...
GKNV Section 5.2 Boundary Clipping
  should clip edges at node boundaries and not penetrate node interiors (2.32ms)

Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (60,15)
Grid size: 65x20
=== BOUNDARY VIOLATION TEST OUTPUT ===
┌──────────┐                                                     
│Research  │                                                     
└───────────────────────│──────────────────────│                 
┌──────▼─────┐ ┌────────▼────────┐ ┌───────────▼──────────┐      
│API Design  │ │Database Design  │ │Infrastructure Setup  │      
└────────────│──────────────────────────│─────────────────┘      
┌────────────▼───────────┐ ┌────────────▼────────────┐           
│Backend Implementation  │ │Frontend Implementation  │           
└──────────│─────────────────────────────────────────┘           
┌──────────▼──────────┐                                          
│Integration Testing  │                                          
└──────│──────────────┘                                          
┌──────▼─────┐                                                   
│Deployment  │                                                   
└────────────┘                                                   
                                                                 
                                                                 
                                                                 
                                                                 
                                                                 
======================================
Edge Boundary Violation Tests
  should not draw edges through node interiors (reproduces │.*[─┼].*│ pattern) (178.37ms)

GKNV C1 Continuity Implementation (Section 5.2)
  should compute matching tangent vectors at spline junctions (0.15ms)
  should handle complex multi-segment path with C1 continuity (0.13ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node start: (5.0,0.0) rank=0
  Node middle: (5.0,3.0) rank=1
  Node end: (5.0,6.0) rank=2
SPLINE-GEN: Creating inter-rank spline for middle->end
SPLINE-GEN: Edge middle->end generated 27 spline points
  SPLINE-COORDS: Start: (5.0,13.0) End: (5.0,-4.0)
SPLINE-GEN: Creating inter-rank spline for start->middle
SPLINE-GEN: Edge start->middle generated 27 spline points
  SPLINE-COORDS: Start: (5.0,10.0) End: (5.0,-7.0)
GKNV Canonical Interface Integration
  should allow users to call the four-pass algorithm using standard GKNV names (3.69ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
SPLINE-GEN: Creating inter-rank spline for a->b
SPLINE-GEN: Edge a->b generated 18 spline points
  SPLINE-COORDS: Start: (5.0,10.0) End: (5.0,-7.0)
  should allow access to individual GKNV canonical functions (1.96ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node A: (5.0,0.0) rank=0
  Node B: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
dag-draw coincident ports
  visual separation for adjacent nodes
    should create visible edge connection even when ports coincide (1.24ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node node-a: (5.0,3.0) rank=1
  Node node-b: (20.0,3.0) rank=1
  Node source: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,50) to (220,103)
Grid size: 130x58
=== BOX OVERLAP PREVENTION TEST ===
┌────────────────┐                                                                                                                
│Research Phase  │                                                                                                                
└────────────────┘                                                                                                                
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         │                                                                                                                        
         ────────────────────────────────────────────────│──────────────────────────────────────────────────────│                 
                                                  ┌──────▼─────┐                                    ┌───────────▼──────────┐      
                                                  │API Design  │                                    │Infrastructure Setup  │      
                                                  └────────────┘                                    └──────────────────────┘      
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
===================================
ASCII collision detection and edge routing
  box overlap prevention
    should prevent node boxes from overlapping or touching (865.28ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node left: (5.0,0.0) rank=0
  Node right: (20.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (90,53)
Grid size: 50x10
=== MINIMUM DISTANCE TEST ===
┌───────────┐                 ┌────────────┐      
│Left Node  │                 │Right Node  │      
└───────────┘                 └────────────┘      
                                                  
                                                  
                                                  
                                                  
                                                  
                                                  
                                                  
===============================
    should maintain minimum safe distances between adjacent nodes (3.18ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target-a: (5.0,3.0) rank=1
  Node target-b: (20.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (158,153)
Grid size: 118x108
=== JUNCTION CHARACTER TEST ===
                                                  ┌────────┐                                                          
                                                  │Source  │                                                          
                                                  └────────┘                                                          
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
                                                       │                                                              
      │───────────────────────────────────────────────────────────────────────────────────────────────────│           
┌─────▼────┐                                                                                        ┌─────▼────┐      
│Target A  │                                                                                        │Target B  │      
└──────────┘                                                                                        └──────────┘      
                                                                                                                      
                                                                                                                      
                                                                                                                      
                                                                                                                      
                                                                                                                      
===============================
  junction character placement
    should only place junction characters at proper intersections (1.49s)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (3) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 30
NODE POSITIONS after complete positioning:
  Node center: (5.0,0.0) rank=0
  Node north: (20.0,3.0) rank=1
  Node south: (35.0,3.0) rank=1
  Node east: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (40,6)
Grid size: 45x11
=== JUNCTION CHARACTER SELECTION TEST ===
┌────────┐                                   
│Center  │                                   
└───│──────────────│──────────────│          
┌───▼──┐       ┌───▼───┐      ┌───▼───┐      
│East  │       │North  │      │South  │      
└──────┘       └───────┘      └───────┘      
                                             
                                             
                                             
                                             
                                             
=========================================
    should use appropriate junction characters at line intersections (20.71ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 19
NODE POSITIONS after complete positioning:
  Node start: (24.0,0.0) rank=0
  Node middle: (5.0,0.0) rank=0
  Node end: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (153,53)
Grid size: 113x10
=== EDGE ROUTING AROUND NODES TEST ===
┌───────┐                                         ┌────────────────┐                                ┌──▼──┐      
│Start  │                                         │Middle Blocker  │                                │End  │      
└───────┘                                         └────────────────┘                                └─────┘      
                                                                                                                 
                                                                                                                 
                                                                                                                 
                                                                                                                 
                                                                                                                 
                                                                                                                 
                                                                                                                 
=======================================
  edge routing through nodes
    should route edges around nodes, not through them (12.57ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (3) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node api: (5.0,3.0) rank=1
  Node db: (20.0,3.0) rank=1
  Node infra: (40.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (54,6)
Grid size: 59x11
=== COMPLEX ROUTING TEST ===
┌──────────┐                                               
│Research  │                                               
└──────│────────────────│───────────────────│              
┌──────▼─────┐ ┌────────▼────────┐ ┌────────▼───────┐      
│API Design  │ │Database Design  │ │Infrastructure  │      
└────────────┘ └─────────────────┘ └────────────────┘      
                                                           
                                                           
                                                           
                                                           
                                                           
===============================
    should handle complex multi-node routing scenarios (65.56ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node task-d: (5.0,0.0) rank=0
  Node task-e: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,50) to (106,153)
Grid size: 20x108
=== COLLISION TEST OUTPUT ===
┌────────┐          
│Task D  │          
└────────┘          
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
┌────▼───┐          
│Task E  │          
└────────┘          
                    
                    
                    
                    
                    
=== END OUTPUT ===
Edge-Node Collision Prevention
  Text corruption prevention
    should not corrupt node text with edge characters (22.36ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=4 crossings=0 converged=t
GKNV A2: Edge crossings detected (2) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node task-a: (5.0,0.0) rank=0
  Node task-b: (5.0,3.0) rank=1
  Node task-c: (20.0,3.0) rank=1
  Node task-d: (5.0,6.0) rank=2
  Node task-e: (5.0,9.0) rank=3
  Node task-f: (20.0,9.0) rank=3

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (26,12)
Grid size: 31x17
=== COMPLEX CONVERGENCE TEST OUTPUT ===
┌────────┐                     
│Task A  │                     
└────│──────────────│          
┌────▼───┐     ┌────▼───┐      
│Task B  │     │Task C  │      
└────│──────────────────┘      
┌────▼───┐                     
│Task D  │                     
└────│──────────────│          
┌────▼───┐     ┌────▼───┐      
│Task E  │     │Task F  │      
└────────┘     └────────┘      
                               
                               
                               
                               
                               
=== END COMPLEX OUTPUT ===
    should handle complex multi-node convergence without corruption (68.47ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,50) to (106,153)
Grid size: 20x108
=== BOUNDARY CONNECTION TEST OUTPUT ===
┌────────┐          
│Source  │          
└────────┘          
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
┌────▼───┐          
│Target  │          
└────────┘          
                    
                    
                    
                    
                    
=== END BOUNDARY OUTPUT ===
    should connect simple two-node graph with visible edges (19.55ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,50) to (106,153)
Grid size: 20x108
=== ARROW DIRECTION TEST OUTPUT ===
┌────────┐          
│Node A  │          
└────────┘          
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
┌────▼───┐          
│Node B  │          
└────────┘          
                    
                    
                    
                    
                    
=== END ARROW OUTPUT ===
    should produce correct arrow character based on layout direction (17.50ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,100) to (104,103)
Grid size: 20x10
    should preserve box drawing characters in node borders (1.46ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node bottom: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (155,153)
Grid size: 115x108
    should handle complex graph without text corruption (1.55s)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=5 crossings=1 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node A: (5.0,0.0) rank=0
  Node B: (5.0,3.0) rank=1
  Node C: (20.0,3.0) rank=1
  Node D: (5.0,6.0) rank=2
  Node E: (20.0,6.0) rank=2
  Node F: (5.0,9.0) rank=3

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (26,12)
Grid size: 31x17

=== COMPLEX 6-NODE GRAPH OUTPUT ===
┌────────┐                     
│Task A  │                     
└────│──────────────│          
┌────▼───┐     ┌────▼───┐      
│Task│B  │     │Task C  │      
└────│───┘     └────│───┘      
┌────▼───┐     ┌────▼───┐      
│Task D  │     │Task E  │      
└────│───┘     └────────┘      
┌────▼───┐                     
│Task F  │                     
└────────┘                     
                               
                               
                               
                               
                               
=== END COMPLEX OUTPUT ===

Complex Graph Edge Routing
  6-Node Multi-Connection Test Case
    reproduces routing issues with converging and diverging edges  Expected `(plist-get node-validation :complete)' to be `eq' to `t', but instead it was `nil'. (20.91ms)
    analyzes port connections for multiple edges from same node (0.28ms)

Crossing Reduction Convergence Detection
  should detect simple convergence scenarios (0.04ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  should work with simple graph layout (1.13ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node db-design: (20.0,3.0) rank=1
  Node api-design: (5.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (35,9)
Grid size: 40x14
=== SPECIFIC JUNCTION PATTERN TEST ===
┌──────────┐                            
│Research  │                            
└───────────────────────│               
┌──────▼─────┐ ┌────────▼────────┐      
│API Design  │ │Database Design  │      
└────│───────────────────────────┘      
┌────▼────┐                             
│Backend  │                             
└─────────┘                             
                                        
                                        
                                        
                                        
                                        
=======================================
Coordinate System Alignment
  junction character attachment
    should not place junction characters directly adjacent to box borders (42.92ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target-a: (5.0,3.0) rank=1
  Node target-b: (20.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (28,6)
Grid size: 33x11
=== JUNCTION ATTACHMENT TEST ===
┌────────┐                       
│Source  │                       
└─────│──────────────│           
┌─────▼────┐   ┌─────▼────┐      
│Target A  │   │Target B  │      
└──────────┘   └──────────┘      
                                 
                                 
                                 
                                 
                                 
===================================
    should attach junction characters directly to node boundaries, not floating (6.33ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node left: (5.0,0.0) rank=0
  Node right: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (15,6)
Grid size: 20x11
=== CLEAN CONNECTION TEST ===
┌───────────┐       
│Left Node  │       
└──────│────┘       
┌──────▼─────┐      
│Right Node  │      
└────────────┘      
                    
                    
                    
                    
                    
===============================
    should connect edges cleanly to box corners and sides (1.96ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node node-a: (5.0,0.0) rank=0
  Node node-b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (76,53)
Grid size: 36x10
=== PORT COORDINATE CONSISTENCY TEST ===
┌────────┐          ┌────▼───┐      
│Node A  │          │Node B  │      
└────────┘          └────────┘      
                                    
                                    
                                    
                                    
                                    
                                    
                                    
=========================================
  port coordinate consistency
    should calculate edge connection points from collision-adjusted node positions (2.01ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node upstream: (5.0,0.0) rank=0
  Node downstream: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (15,6)
Grid size: 20x11
=== COORDINATE SYSTEM CONSISTENCY TEST ===
┌──────────┐        
│Upstream  │        
└──────│───┘        
┌──────▼─────┐      
│Downstream  │      
└────────────┘      
                    
                    
                    
                    
                    
==========================================
    should use adjusted coordinates for both node drawing and edge routing (1.61ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node center: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (155,53)
Grid size: 115x10
=== EDGE ROUTING ALIGNMENT TEST ===
┌───▼──┐                                          ┌────────┐                                        ┌───▼───┐      
│Left  │                                          │Center  │                                        │Right  │      
└──────┘                                          └────────┘                                        └───────┘      
                                                                                                                   
                                                                                                                   
                                                                                                                   
                                                                                                                   
                                                                                                                   
                                                                                                                   
                                                                                                                   
====================================
  edge routing coordinate alignment
    should route edges using the same coordinate system as node drawing (10.10ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (3) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 30
NODE POSITIONS after complete positioning:
  Node hub: (5.0,0.0) rank=0
  Node spoke1: (5.0,3.0) rank=1
  Node spoke2: (20.0,3.0) rank=1
  Node spoke3: (35.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (41,6)
Grid size: 46x11
=== JUNCTION PATTERN CONSISTENCY TEST ===
┌─────┐                                       
│Hub  │                                       
└────│──────────────│──────────────│          
┌────▼───┐     ┌────▼───┐     ┌────▼───┐      
│Spoke1  │     │Spoke2  │     │Spoke3  │      
└────────┘     └────────┘     └────────┘      
                                              
                                              
                                              
                                              
                                              
=========================================
    should create consistent junction patterns for multiple edges (10.45ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (0,0) to (206,3)
Grid size: 216x10
=== ARROW DIRECTION ACCURACY TEST ===
┌────────┐                                                                                                                                                                                              ┌────▼───┐      
│Source  │                                                                                                                                                                                              │Target  │      
└────────┘                                                                                                                                                                                              └────────┘      
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
  arrow direction accuracy
    should place arrows based on actual edge endpoint directions  Expected `ascii-output' with value "┌────────┐                                                                                                                                                                                              ┌────▼───┐      
│Source  │                                                                                                                                                                                              │Target  │      
└────────┘                                                                                                                                                                                              └────────┘      
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        
                                                                                                                                                                                                                        " not to match the regexp "▼", but it matched the substring "▼" from position 205 to 206. (1.44ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node top: (20.0,0.0) rank=0
  Node bottom: (5.0,3.0) rank=1
  Node left: (5.0,0.0) rank=0
  Node right: (20.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (25,25) to (130,78)
Grid size: 115x58
=== MULTIPLE ARROW DIRECTIONS TEST ===
                                                  ┌─────┐                                                          
                                                  │Top  │                                                          
                                                  └─────┘                                                          
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
    ─────────────────────────────────────────────────│──────────────────────────────────────────────────│          
┌──────┐                                             │                                              ┌───▼───┐      
│Left  │                                             │                                              │Right  │      
└──────┘                                             │                                              └───────┘      
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     │                                                             
                                                     ──│                                                           
                                                  ┌────▼───┐                                                       
                                                  │Bottom  │                                                       
                                                  └────────┘                                                       
                                                                                                                   
                                                                                                                   
                                                                                                                   
                                                                                                                   
                                                                                                                   
=======================================
    should handle multiple arrow directions correctly in complex graphs (387.28ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target: (5.0,3.0) rank=1
GKNV Pass 3 Coordinate Authority
  coordinate system single source of truth
    should store GKNV coordinates in protected adjusted-positions (1.35ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node center: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  test fixture replacement
    should use GKNV parameters instead of manual coordinates for test setup (1.12ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node backend: (5.0,0.0) rank=0
  Node integration: (5.0,3.0) rank=1
Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== COORDINATE COMPARISON ===
SIMPLE GRAPH:
  Backend: world-y=0.0, rank=0
  Integration: world-y=3.0, rank=1
  Bounds: min-y=-10.0, max-y=13.0
COMPLEX GRAPH:
  Backend: world-y=6.0, rank=2
  Integration: world-y=9.0, rank=3
  Bounds: min-y=-10.0, max-y=22.0
Coordinate System Debug Tests
  Simple 2-node vs Complex 8-node Coordinate Comparison
    should have similar coordinate patterns for both simple and complex graphs (4.25ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (5.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== GRID CONVERSION ANALYSIS ===
Scale: 0.15, Adjusted min-y: -20.00
  research: world-y=0.0 → grid-center-y=3.0 → grid-top-y=2
  database: world-y=3.0 → grid-center-y=3.0 → grid-top-y=2
  backend: world-y=6.0 → grid-center-y=4.0 → grid-top-y=3
  integration: world-y=9.0 → grid-center-y=4.0 → grid-top-y=3
  deployment: world-y=12.0 → grid-center-y=5.0 → grid-top-y=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (27,15)
Grid size: 32x20
  Final grid height: 20 lines
=== END CONVERSION ANALYSIS ===

  Grid Conversion Analysis
    should convert world coordinates to valid grid coordinates for all nodes (2.37ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node backend: (5.0,0.0) rank=0
  Node integration: (5.0,3.0) rank=1

=== EDGE COORDINATE TRACING ===
Edge spline points: 0
  Edge Coordinate Tracing
    should trace edge endpoints through the coordinate pipeline (0.82ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
Coordinate-mode parameter
  dag-draw-layout-graph with coordinate-mode
    should accept coordinate-mode parameter (0.78ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
    should operate in ASCII-native mode when coordinate-mode is 'ascii  Expected `(dag-draw-node-y-coord node-a)' > 0, but `(dag-draw-node-y-coord node-a)' was 0. (0.79ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
    should operate in high-resolution mode by default (0.83ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
    should produce different results for ASCII vs high-res modes  Expected `(abs (- (dag-draw-node-x-coord ascii-node-a) (dag-draw-node-x-coord highres-node-a)))' > 0.1, but `(abs (- (dag-draw-node-x-coord ascii-node-a) (dag-draw-node-x-coord highres-node-a)))' was 0. (1.47ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 30
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (20.0,0.0) rank=0
  Node c: (35.0,0.0) rank=0
GKNV coordinate positioning with separation constraints
  node separation constraint handling
    should maintain minimum separation between adjacent nodes  Expected `(>= (- middle left) min-left-middle-sep)' to be `eq' to `t', but instead it was `nil'. (1.55ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 41
NODE POSITIONS after complete positioning:
  Node short: (46.0,0.0) rank=0
  Node medium: (30.0,0.0) rank=0
  Node long: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (47,3)
Grid size: 52x10
GKNV to ASCII Coordinate Scaling Integration
  should produce appropriately sized nodes for text content (4.16ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node bottom: (5.0,3.0) rank=1
  should maintain proper spacing between nodes  Expected `y-separation' > 24, but `y-separation' was 3. (1.03ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node start: (5.0,0.0) rank=0
  Node middle: (5.0,3.0) rank=1
  Node end: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,9)
Grid size: 20x14

=== COORDINATE SCALING TEST OUTPUT ===
┌───────┐           
│Start  │           
└────│──┘           
┌────▼───┐          
│Middle  │          
└──│─────┘          
┌──▼──┐             
│End  │             
└─────┘             
                    
                    
                    
                    
                    
=====================================

  should handle coordinate scaling with edge routing (4.24ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node mid-left: (5.0,6.0) rank=2
  Node mid-right: (20.0,6.0) rank=2
  Node bottom: (5.0,9.0) rank=3

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (29,12)
Grid size: 34x17
  should optimize grid density for different graph complexities (3.33ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (0,0) to (206,103)
Grid size: 216x108
  should handle world coordinate boundaries correctly (787.64ms)

dag-draw-core utilities
  graph traversal
    should get node by ID (0.18ms)
    should return nil for non-existent node (0.09ms)
    should get outgoing edges (0.28ms)
    should get incoming edges (0.10ms)
    should get successors (0.10ms)
    should get predecessors (0.08ms)
  graph properties
    should find source nodes (0.11ms)
  graph modification
    should remove nodes and connected edges (0.08ms)
    should remove specific edges (0.05ms)
  graph copying
    should create deep copies (0.25ms)
  debugging utilities
    should generate graph summaries (0.08ms)


=== ASCII-NATIVE RENDERING ===
Grid bounds: (0,0) to (86,63)
Grid size: 96x68
CORNER-ARROW TEST OUTPUT:
┌────────┐                                                                                      
│Source  │                                                                                      
└────────┘                                                                                      
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     │                                                                                          
     ────────────────────────────────────────────────────────────────────────────────│          
                                                                                ┌────▼───┐      
                                                                                │Target  │      
                                                                                └────────┘      
                                                                                                
                                                                                                
                                                                                                
                                                                                                
                                                                                                
GKNV corner-arrow combinations for L-shaped paths
  basic L-shaped path rendering
    should create L-shaped path with corner and arrow for diagonal connections (0.40ms)

GKNV crossing reduction algorithm
  crossing count calculation
    should count edge crossings between adjacent ranks (0.11ms)
  median heuristic ordering
    should use median positions to reduce crossings (0.13ms)

Network simplex optimization: converged in 1 iterations
SIMPLEX RANKS:
  a: rank 0
  b: rank 1
  c: rank 1
  d: rank 2
TOPOLOGICAL RANKS:
  a: rank 0
  b: rank 1
  c: rank 1
  d: rank 2
Debug Network Simplex
  should show what our network simplex actually does vs topological (0.58ms)

GKNV DFS Edge Classification
  proper edge taxonomy per Section 2.1
    should classify tree edges correctly (0.16ms)
    should classify forward edges correctly  Expected `forward-edges' not to be `eq' to `nil', but it was. (0.10ms)
    should classify back edges correctly (0.10ms)
    should classify cross edges correctly (0.12ms)
    should integrate with cycle breaking per GKNV Section 2.1 (0.13ms)

Dynamic ASCII scale calculation
  basic scale calculation
    should calculate optimal scale for simple graphs (0.17ms)
    should return smaller scale for complex graphs (0.28ms)
    should prevent coordinate collapse (0.07ms)
    should detect and prevent coordinate collapse (0.23ms)
  enhanced complexity analysis
    should consider node size variations (0.11ms)
    should consider edge density (0.15ms)
    should consider hierarchy depth (0.15ms)
  scale validation
    should handle empty graphs gracefully (0.06ms)
    should handle single node graphs (0.08ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node label-a-b: (20.0,0.0) rank=0
Edge Label Integration with Mainline Pipeline
  should automatically process edge labels during layout (1.15ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  should skip processing when no edge labels exist (0.91ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (5.0,6.0) rank=2
  Node label-a-b: (20.0,0.0) rank=0
  should handle mixed labeled and unlabeled edges (1.15ms)

GKNV Edge Label Virtual Nodes (Section 5.3)
  edge label virtual node creation
    should create virtual nodes for edges with labels (0.09ms)
    should not create virtual nodes for edges without labels (0.04ms)
    should handle multiple labeled edges (0.06ms)
  rank separation compensation per GKNV Section 5.3
    should double minimum edge lengths for labeled edges (0.05ms)
    should not modify edge lengths for unlabeled edges (0.04ms)

Network simplex optimization: converged in 3 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node db-design: (20.0,3.0) rank=1
  Node api-design: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration-test: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (60,15)
Grid size: 65x20
dag-draw edge character placement
  complex graph edge placement
    should not place corner characters inside node content (4.47ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node A: (5.0,0.0) rank=0
  Node B: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (17,6)
Grid size: 22x11
  node boundary protection
    should maintain clear separation between node content and edge characters (1.12ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (13,6)
Grid size: 20x11

=== SIMPLE GRAPH OUTPUT ===
┌──────────┐        
│Research  │        
└─────│────┘        
┌─────▼────┐        
│Database  │        
└──────────┘        
                    
                    
                    
                    
                    
==============================

End-to-End DAG Pipeline Quality Tests
  should produce clean ASCII output with full text labels (0.97ms)
Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (60,15)
Grid size: 65x20
┌──────────┐                                                     
│Research  │                                                     
└───────────────────────│──────────────────────│                 
┌──────▼─────┐ ┌────────▼────────┐ ┌───────────▼──────────┐      
│API Design  │ │Database Design  │ │Infrastructure Setup  │      
└────────────│──────────────────────────│─────────────────┘      
┌────────────▼───────────┐ ┌────────────▼────────────┐           
│Backend Implementation  │ │Frontend Implementation  │           
└──────────│─────────────────────────────────────────┘           
┌──────────▼──────────┐                                          
│Integration Testing  │                                          
└──────│──────────────┘                                          
┌──────▼─────┐                                                   
│Deployment  │                                                   
└────────────┘                                                   
                                                                 
                                                                 
                                                                 
                                                                 
                                                                 
Node validation result: (:complete t :missing-text nil)

=== COMPLEX GRAPH OUTPUT ===
┌──────────┐                                                     
│Research  │                                                     
└───────────────────────│──────────────────────│                 
┌──────▼─────┐ ┌────────▼────────┐ ┌───────────▼──────────┐      
│API Design  │ │Database Design  │ │Infrastructure Setup  │      
└────────────│──────────────────────────│─────────────────┘      
┌────────────▼───────────┐ ┌────────────▼────────────┐           
│Backend Implementation  │ │Frontend Implementation  │           
└──────────│─────────────────────────────────────────┘           
┌──────────▼──────────┐                                          
│Integration Testing  │                                          
└──────│──────────────┘                                          
┌──────▼─────┐                                                   
│Deployment  │                                                   
└────────────┘                                                   
                                                                 
                                                                 
                                                                 
                                                                 
                                                                 
===============================

  should handle complex task dependency graph without text truncation (190.10ms)

Enhanced cycle breaking and virtual node management
  GKNV cycle detection with DFS back-edge removal
    should detect cycles and break them using GKNV-recommended DFS approach (0.34ms)
  virtual node creation for long edges
    should create virtual nodes to break long edges spanning multiple ranks (0.30ms)
  GKNV minpath virtual node chain straightening
    should align virtual nodes in chains for straight edge appearance (0.11ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node db-design: (20.0,3.0) rank=1
  Node api-design: (5.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
Enhanced Separation Algorithm
  should provide adequate separation for parallel dependency paths  Expected `separation' > 80, but `separation' was 15. (1.77ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node db-design: (20.0,3.0) rank=1
  Node api-design: (5.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (35,9)
Grid size: 40x14
Visual Confusion Prevention
  should generate ASCII output that clearly shows parallel paths  Expected `separation' > 80, but `separation' was 15. (10.75ms)

Real Task Dependencies
  should handle tasks.org with enhanced separation (0.06ms)

Complete GKNV network simplex algorithm
  main optimization loop
    should find optimal solution through iterative edge exchanges (0.49ms)
  entering and leaving edge selection
    should select edges for tree exchange based on cut values (0.19ms)

GKNV Comprehensive Cycle Breaking
  strongly connected component handling per Section 2.1
    should handle non-trivial strongly connected components (0.12ms)
    should count cycle participation per GKNV heuristic  FAILED (0.25ms)
    should preserve original visual direction when reversing (0.15ms)
    should start DFS from source or sink nodes when available (0.10ms)
    should handle disconnected graph components (0.09ms)

Network simplex optimization: converged in 1 iterations
GKNV Standard Function Names Compliance
  Pass 1: Rank Assignment Functions
    should have dag-draw-rank entry point (0.45ms)
    should have dag-draw-init-rank from Figure 2-2 (0.03ms)
    should have dag-draw-feasible-tree from Figure 2-2 (0.03ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
  Pass 2: Vertex Ordering Functions
    should have dag-draw-ordering entry point (0.56ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node node: (5.0,0.0) rank=0
  Pass 3: Coordinate Assignment Functions
    should have dag-draw-position entry point (0.84ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node from: (5.0,0.0) rank=0
  Node to: (5.0,3.0) rank=1
SPLINE-GEN: Creating inter-rank spline for from->to
SPLINE-GEN: Edge from->to generated 18 spline points
  SPLINE-COORDS: Start: (5.0,10.0) End: (5.0,-7.0)
  Pass 4: Spline Generation Functions
    should have dag-draw-make-splines entry point (1.69ms)
    should have dag-draw-generate-spline from Section 5.2 (0.04ms)

GKNV Spline Region Computation (Section 5)
  Stage 1: compute_L_array per Section 5.2
    should compute intersection line segments between adjacent boxes (0.09ms)
    should handle boxes with no intersection (0.03ms)
  Stage 2: compute_p_array (Linear Path) per Section 5.2
    should compute piecewise linear path using divide-and-conquer (0.20ms)
    should use line_fits function for feasibility checking (0.06ms)
    should subdivide recursively when direct line doesn't fit (0.05ms)
  Stage 3: compute_s_array (Bezier Splines) per Section 5.2
    should compute piecewise Bezier spline from linear path (0.13ms)
    should use spline_fits for feasibility checking (0.09ms)
    should implement C¹ continuity at subdivision points (0.05ms)
  Stage 4: compute_bboxes per Section 5.2
    should compute bounding boxes for final spline (0.09ms)
  Spline refinement functions per Section 5.2
    should implement straighten_spline refinement (0.08ms)
    should implement refine_spline function (0.11ms)
  Integration with existing spline system
    should integrate three-stage process into main spline computation (0.12ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 19
NODE POSITIONS after complete positioning:
  Node start: (24.0,0.0) rank=0
  Node middle: (5.0,0.0) rank=0
  Node end: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (153,53)
Grid size: 113x10
=== GRID SIZING TEST OUTPUT ===
┌───────┐                                         ┌────────────────┐                                ┌──▼──┐      
│Start  │                                         │Middle Blocker  │                                │End  │      
└───────┘                                         └────────────────┘                                └─────┘      
                                                                                                                 
                                                                                                                 
                                                                                                                 
                                                                                                                 
                                                                                                                 
                                                                                                                 
                                                                                                                 
==============================
Grid Sizing Issues
  should include all nodes within grid boundaries after spline regeneration (11.00ms)

Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4
Y-coordinates by rank:
  Research (rank 0): 0
  Database/API/Infrastructure (rank 1): 3/3/3
  Backend/Frontend (rank 2): 6/6
  Integration (rank 3): 9
  Deployment (rank 4): 12
GKNV Pass 3: Hierarchical Node Positioning
  should position nodes in clean hierarchical columns with proper spacing (3.78ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node bottom: (5.0,6.0) rank=2
X-coordinates: Top=5, Left=5, Right=20, Bottom=5
  should center nodes appropriately within their ranks (1.60ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node single: (5.0,0.0) rank=0
  should handle single node positioning correctly (0.67ms)

Enhanced junction characters
  dag-draw--get-enhanced-junction-char
    should exist as a function (0.04ms)
    should handle starting port junction characters (0.03ms)
    should handle ending port junction characters (0.03ms)
    should handle direction change junctions (0.03ms)
    should handle edge joining junctions (0.05ms)
    should handle edge separation junctions (0.04ms)
    should handle edge crossing junctions (0.03ms)
    should handle complex T-junction scenarios (0.03ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (20.0,3.0) rank=1
  edge analysis for junction detection
    should analyze edge intersections in ASCII grid (1.28ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target: (5.0,3.0) rank=1
    should detect port boundary junctions (0.94ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target-a: (5.0,3.0) rank=1
  Node target-b: (20.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (28,6)
Grid size: 33x11
=== JUNCTION TEST ===
┌────────┐                       
│Source  │                       
└─────│──────────────│           
┌─────▼────┐   ┌─────▼────┐      
│Target A  │   │Target B  │      
└──────────┘   └──────────┘      
                                 
                                 
                                 
                                 
                                 
==================
Junction Character Issues
  should not create floating junction characters (5.58ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (5.0,3.0) rank=1
Layout coordinates: Research=(5,0) size=(80.0x20.0)
                   Database=(5,3) size=(80.0x20.0)
Layout-Render Integration Tests
  Layout coordinate output
    should produce usable coordinates from layout pipeline (1.04ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node database: (5.0,0.0) rank=0
  Node backend: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (27,6)
Grid size: 32x11
Lower Level Edge Visibility Tests
  Backend Implementation Edge Visibility
    should show visible edge from Database Design to Backend Implementation (2.53ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node api: (5.0,0.0) rank=0
  Node backend: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (27,6)
Grid size: 32x11
    should show visible edge from API Design to Backend Implementation (2.58ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node api: (5.0,0.0) rank=0
  Node frontend: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (28,6)
Grid size: 33x11
  Frontend Implementation Edge Visibility
    should show visible edge from API Design to Frontend Implementation (2.83ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node backend: (5.0,0.0) rank=0
  Node integration: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (27,6)
Grid size: 32x11
  Integration Testing Edge Visibility
    should show visible edge from Backend to Integration Testing (2.82ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node frontend: (5.0,0.0) rank=0
  Node integration: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (28,6)
Grid size: 33x11
    should show visible edge from Frontend to Integration Testing (2.77ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node integration: (5.0,0.0) rank=0
  Node deployment: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (24,6)
Grid size: 29x11
  Deployment Edge Visibility
    should show visible edge from Integration Testing to Deployment (3.74ms)
Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (60,15)
Grid size: 65x20
  Complex Multi-Level Edge Visibility
    should show all edges in the full dependency graph (184.81ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node backend: (5.0,0.0) rank=0
  Node integration: (5.0,3.0) rank=1
  Node deployment: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (27,9)
Grid size: 32x14
  Coordinate Range Validation
    should place all nodes within ASCII grid bounds (1.87ms)

GKNV Mathematical Notation Compliance
  delta (δ) for minimum edge length
    should use delta notation in edge accessors (0.08ms)
  omega (ω) for edge weight
    should use omega notation in edge accessors (0.05ms)
  lambda (λ) for rank assignment
    should use lambda notation in node accessors (0.04ms)
  rho (ρ) for separation function
    should use rho notation for separation calculations (0.07ms)

GKNV minpath() virtual node chain detection
  should identify simple virtual node chain (0.11ms)
  should identify multiple independent virtual node chains (0.14ms)
  should handle graph with no virtual nodes (0.05ms)

GKNV minpath() virtual node chain straightening
  should align virtual nodes in same X coordinate for straight vertical chain (0.10ms)
  should straighten multiple independent chains without affecting each other (0.18ms)
  should calculate optimal X coordinate for virtual chain alignment (0.09ms)

GKNV minpath() edge cases and integration
  should handle empty graph gracefully (0.08ms)
  should handle graph with only real nodes (0.09ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV enhancement: Improved layout width from 45 to 20
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 20
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node virtual_1: (0.0,0.0) rank=0
  Node virtual_2: (0.0,0.0) rank=0
  Node target: (20.0,0.0) rank=0
  should integrate with GKNV Pass 3 positioning workflow (1.37ms)

GKNV Network Simplex - Comprehensive Tests
  should reproduce GKNV Figure 2-3 exact example with negative cut value (0.31ms)
  should handle simple 3-node triangle with clear optimization opportunity (0.16ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node start: (5.0,0.0) rank=0
  Node process: (5.0,3.0) rank=1
  Node end: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (12,9)
Grid size: 20x14
  should work with full GKNV pipeline for realistic graph (1.64ms)
  should verify cut value calculation fundamentals (0.09ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node a1: (5.0,0.0) rank=0
  Node b1: (5.0,3.0) rank=1
  Node a2: (20.0,0.0) rank=0
  Node b2: (20.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (22,6)
Grid size: 27x11
  should handle disconnected components correctly (1.47ms)
Network simplex optimization: converged in 1 iterations
  should pass network simplex optimization sanity check (0.41ms)

GKNV Network Simplex Core Algorithm
  should detect when spanning tree is already optimal (no negative cut values) (0.13ms)
  should find leaving edge with negative cut value when tree is not optimal (0.18ms)

GKNV Network Simplex Cut Value Calculation
  proper cut value computation per Section 2.3
    should calculate cut values using tail/head component weights (0.23ms)
    should identify head and tail components correctly (0.24ms)
    should sum crossing edge weights with proper signs (0.19ms)
Network simplex optimization: converged in 1 iterations
    tight edge identification per Section 2.3
      should identify edges with slack = 0 as tight (0.33ms)
Network simplex optimization: converged in 1 iterations
      should implement tight_tree() function per GKNV Figure 2-2 (0.40ms)
      should integrate tight_tree() functions with network simplex per GKNV Figure 2-2 (0.21ms)

Network Simplex Enhanced Edge Weight System
  auxiliary node and edge management
    should create auxiliary nodes for network simplex optimization (0.24ms)
Network simplex optimization: converged in 1 iterations
    should handle long edges with virtual nodes (0.63ms)
Network simplex optimization: converged in 1 iterations
  edge weight optimization and cost calculation
    should calculate total network cost using edge weights (0.37ms)
Network simplex optimization: converged in 1 iterations
    should optimize edge weights during network simplex iterations (0.77ms)

Network simplex optimization: converged in 1 iterations
DEBUG ranks: a=0 b=1 c=2 d=3
Network Simplex Integration into Mainline Ranking
  should use network simplex optimization in dag-draw--assign-ranks-network-simplex (0.55ms)
Network simplex optimization: converged in 1 iterations
  should call network simplex functions during mainline ranking (0.35ms)

Network Simplex Iteration Process
  entering and leaving edge selection
    should find entering edge for optimization (0.32ms)
    should perform edge exchange in spanning tree (0.17ms)
  iteration convergence and optimization
    should perform single iteration of network simplex (0.23ms)
    should detect convergence when no negative cut values exist (0.11ms)
  cut value formula implementation
    should implement GKNV cut value formula correctly  Expected `cut-value' < 0, but `cut-value' was 4. (0.21ms)

Network Simplex Spanning Tree Construction
  feasible spanning tree creation
    should create spanning tree for simple 3-node graph (0.27ms)
    should create feasible ranking from spanning tree (0.25ms)
    should handle disconnected components  Expected `(length (ht-get tree-info 'tree-edges))' to be `equal' to `2', but instead it was `1' which does not match because: (different-atoms (1 "#x1" "?") (2 "#x2" "?")). (0.22ms)
  spanning tree navigation functions
    should extract root node from single-component spanning tree (0.19ms)
    should handle multiple components with single tight tree (0.21ms)

Node Port Calculation
  Basic port calculation for rectangular nodes
    should calculate top port for upward connections (0.08ms)
    should calculate bottom port for downward connections (0.06ms)
    should calculate left port for leftward connections (0.06ms)
    should calculate right port for rightward connections (0.06ms)
  Edge direction-based port selection
    should select correct ports for vertical edges (0.13ms)
    should select correct ports for horizontal edges (0.12ms)
    should handle diagonal edges by choosing primary direction (0.07ms)
    Integration with edge routing
      should provide port coordinates for ASCII edge drawing (0.10ms)

GKNV packcut() layout compaction detection
  should identify compactable space between nodes (0.12ms)
  should detect no compaction opportunity when nodes properly spaced (0.07ms)
  should handle multiple ranks with different compaction opportunities (0.10ms)

GKNV packcut() layout compaction algorithm
  should compact simple layout by removing excessive spacing (0.27ms)
  should respect GKNV separation constraints during compaction (0.10ms)
  should perform left-to-right sweep compaction as specified by GKNV (0.18ms)
  should compact multiple ranks independently (0.18ms)

GKNV packcut() constraint handling and edge cases
  should handle empty graph gracefully (0.06ms)
  should handle single node graph (0.07ms)
  should maintain node ordering during compaction (0.16ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node middle1: (5.0,3.0) rank=1
  Node middle2: (20.0,3.0) rank=1
  Node target: (5.0,6.0) rank=2
  should integrate with GKNV Pass 3 positioning workflow (1.70ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (6,6)
Grid size: 20x11

=== EXCESSIVE LINES TEST ===
┌───┐               
│A  │               
└─│─┘               
┌─▼─┐               
│B  │               
└───┘               
                    
                    
                    
                    
                    
===========================
Pattern Isolation Tests - Debug Each Visual Issue
  Excessive horizontal line pattern (──────)
    should not produce 6+ consecutive horizontal characters (2.11ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target1: (5.0,3.0) rank=1
  Node target2: (20.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (27,6)
Grid size: 32x11

=== FLOATING ARROWS TEST ===
┌────────┐                      
│Source  │                      
└────│──────────────│           
┌────▼────┐    ┌────▼────┐      
│Target1  │    │Target2  │      
└─────────┘    └─────────┘      
                                
                                
                                
                                
                                
=============================
  Floating arrows pattern
    should not have arrows disconnected from lines (1.45ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node start: (5.0,0.0) rank=0
  Node end: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (10,6)
Grid size: 20x11

=== FRAGMENTED ROUTING TEST ===
┌───────┐           
│Start  │           
└──│────┘           
┌──▼──┐             
│End  │             
└─────┘             
                    
                    
                    
                    
                    
================================
  Fragmented routing patterns
    should not have broken L-connections (1.29ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node node1: (5.0,0.0) rank=0
  Node node2: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (10,6)
Grid size: 20x11

=== NODE BOUNDARY TEST ===
┌───────┐           
│Node1  │           
└───│───┘           
┌───▼───┐           
│Node2  │           
└───────┘           
                    
                    
                    
                    
                    
===========================
  Node boundary connection issues
    should properly connect edges to node boundaries (2.23ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (3) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 30
NODE POSITIONS after complete positioning:
  Node center: (5.0,0.0) rank=0
  Node dest1: (5.0,3.0) rank=1
  Node dest2: (20.0,3.0) rank=1
  Node dest3: (35.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (40,6)
Grid size: 45x11

=== PORT DISTRIBUTION DEBUG ===
┌────────┐                                   
│Center  │                                   
└───│──────────────│──────────────│          
┌───▼───┐      ┌───▼───┐      ┌───▼───┐      
│Dest1  │      │Dest2  │      │Dest3  │      
└───────┘      └───────┘      └───────┘      
                                             
                                             
                                             
                                             
                                             
================================
  Port distribution coordinate debugging
    should show different coordinates for multiple edges from same node (55.78ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (28,9)
Grid size: 33x14

=== COMPLEX SCENARIO TEST ===
┌──────────┐                     
│Research  │                     
└──│─────────────────│           
┌──▼──┐        ┌─────▼────┐      
│API  │        │Database  │      
└────│────────────────────┘      
┌────▼────┐                      
│Backend  │                      
└─────────┘                      
                                 
                                 
                                 
                                 
                                 
==============================
  Complex scenario reproduction
    should handle multi-node graph without artifacts (15.05ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node A: (5.0,0.0) rank=0
  Node B: (5.0,3.0) rank=1
From node coords: (5.0, 0.0) size: (66.7, 20.0)
To node coords: (5.0, 3.0) size: (66.7, 20.0)
From port: (25.0, 10.0)
To port: (25.0, -7.0)
dag-draw port calculation
  edge endpoint calculation
    should calculate different coordinates for different node edges  Expected `(dag-draw-point-y to-port)' to be `equal' to `15.0', but instead it was `-7.0' which does not match because: (different-atoms -7.0 15.0). (1.88ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node LEFT: (5.0,0.0) rank=0
  Node RIGHT: (5.0,3.0) rank=1
    should select appropriate sides for horizontally separated nodes (1.76ms)


=== PORT COORDINATE SYSTEM BUG DEMONSTRATION ===
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (5.0,3.0) rank=1

--- STEP 1: World Coordinates After Layout ---
Research: x=5.0 y=0.0 width=80.0 height=20.0

--- STEP 2: Spline Generation Ports (World Coordinates) ---
Research port (world): x=5.0 y=0.0
Database port (world): x=5.0 y=3.0

--- STEP 3: Original Bounds (Before Collision Adjustment) ---
Original bounds: min-x=-58.3 min-y=-10.0

--- STEP 4: Grid Conversion (Original Bounds) ---
Research port (grid, original): x=10.0 y=2.0
Database port (grid, original): x=10.0 y=2.0

--- STEP 5: Collision Buffer Adjustment ---
Adjusted bounds: min-x=-63.3 min-y=-15.0 (buffer=5.0)

--- STEP 6: Grid Conversion (Adjusted Bounds) ---
Research port (grid, adjusted): x=10.0 y=2.0
Database port (grid, adjusted): x=10.0 y=3.0

--- STEP 7: COORDINATE DRIFT ANALYSIS ---
Research port drift: dx=0.0 dy=0.0
Database port drift: dx=0.0 dy=1.0
Expected drift: collision-buffer × scale = 5.0 × 0.150 = 0.8

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (20,6)
Grid size: 25x11

--- STEP 8: Actual ASCII Output ---
┌──────────┐             
│Research  │             
└────────│─┘             
┌────────▼────────┐      
│Database Design  │      
└─────────────────┘      
                         
                         
                         
                         
                         

=== BUG CONFIRMATION ===
The 0.0 grid unit drift explains why Research port appears at y=2 instead of y=2
This proves the coordinate system inconsistency between spline and ASCII phases.
Port Coordinate System Bug
  should demonstrate coordinate system inconsistency between spline generation and ASCII rendering  Expected `(abs research-y-drift)' > 0.5, but `(abs research-y-drift)' was 0.0. (1.79ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node start: (5.0,0.0) rank=0
  Node middle: (5.0,3.0) rank=1
  Node end: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,9)
Grid size: 20x14

=== PORT-TO-PORT ROUTING OUTPUT ===
┌───────┐           
│Start  │           
└────│──┘           
┌────▼───┐          
│Middle  │          
└──│─────┘          
┌──▼──┐             
│End  │             
└─────┘             
                    
                    
                    
                    
                    
===================================

Port-to-Port Edge Routing
  should produce clean ASCII connections with port routing (3.87ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node bottom: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (25,9)
Grid size: 30x14

=== DIAMOND ROUTING OUTPUT ===
┌─────┐                       
│Top  │                       
└───│──────────────│          
┌───▼──┐       ┌───▼───┐      
│Left  │       │Right  │      
└────│─────────────────┘      
┌────▼───┐                    
│Bottom  │                    
└────────┘                    
                              
                              
                              
                              
                              
==============================

  should handle diamond routing pattern (12.43ms)

GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (5.0,6.0) rank=2
dag-draw-position
  Y-coordinate assignment
    should assign Y coordinates based on ranks  Expected `y-b' to be `equal' to `25', but instead it was `3' which does not match because: (different-atoms (3 "#x3" "?") (25 "#x19" "?")). (0.70ms)
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node a: (5.0,3.0) rank=1
  Node b: (20.0,3.0) rank=1
    should handle nodes in same rank  Expected `y-a' to be `equal' to `25', but instead it was `3' which does not match because: (different-atoms (3 "#x3" "?") (25 "#x19" "?")). (0.43ms)
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 30
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (20.0,0.0) rank=0
  Node c: (35.0,0.0) rank=0
  X-coordinate assignment
    should assign X coordinates respecting node order  Expected `x-a' to be `equal' to `0', but instead it was `5' which does not match because: (different-atoms (5 "#x5" "?") (0 "#x0" "? ")). (0.48ms)
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (20.0,0.0) rank=0
    should handle minimum separation constraints  Expected `(- x-b x-a)' >= 110.0, but `(- x-b x-a)' was 15. (0.40ms)
  auxiliary graph creation
    should copy original nodes with omega weights (0.19ms)
    should handle multiple edges correctly (0.18ms)
  graph bounds calculation
    should calculate correct bounding box (0.15ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (5.0,6.0) rank=2
  integration with full pipeline
    should work with complete layout pipeline (1.34ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node root: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node sink: (5.0,6.0) rank=2
    should handle complex graph with multiple branches (1.53ms)
  omega factor calculation
    should return correct factors for different node types (0.10ms)

Quality assurance for ASCII rendering
  node boundary validation
    should have the validation function available (0.04ms)
    should return a hash table from validation function (0.03ms)
    should detect edges terminating properly at node boundaries (0.06ms)
  should detect edges terminating inside node text areas (0.06ms)

edge continuity verification
  should detect complete edge paths without gaps (0.06ms)
  should detect gaps in edge rendering (0.05ms)

character semantics validation
  should validate correct arrow directions (0.06ms)
  should detect incorrect arrow directions (0.05ms)

Network simplex optimization: converged in 1 iterations
Edge convergence analysis
  should count edges between adjacent ranks (0.37ms)
Network simplex optimization: converged in 1 iterations
  should detect maximum convergence on destination nodes (0.41ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node left: (5.0,0.0) rank=0
  Node right: (5.0,3.0) rank=1
  should calculate horizontal distances for edge routing (0.80ms)

Network simplex optimization: converged in 1 iterations
Dynamic rank separation calculation
  should require minimal spacing for simple graphs (0.29ms)
Network simplex optimization: converged in 1 iterations
  should require more spacing for high convergence graphs (0.51ms)
Network simplex optimization: converged in 1 iterations
  should require more spacing for dense edge crossings (1.22ms)

Network simplex optimization: converged in 1 iterations
DYNAMIC-SPACING: Calculated 3 rows for graph (nodes: 4, edges: 4)
=== DYNAMIC SPACING ANALYSIS ===
Graph complexity: (:total-nodes 4 :total-edges 4 :rank-count 3 :max-convergence 2 :total-rank-transitions 4 :avg-edges-per-transition 2.0)
Calculated max rank separation: 3 ASCII rows
Rank 0→1: 2 rows (edges: 2, max convergence: 1)
Rank 1→2: 3 rows (edges: 2, max convergence: 2)
=== END SPACING ANALYSIS ===
Dynamic spacing integration
  should integrate with ASCII resolution preprocessing (0.92ms)
Network simplex optimization: converged in 2 iterations
  should optimize spacing for the complex dependency graph (1.83ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
  should produce clean edge routing without excessive spacing (1.06ms)

Edge case handling
  should handle empty graphs (0.05ms)
  should handle single node graphs (0.05ms)
  should handle graphs with no edges (0.05ms)

Network simplex optimization: converged in 2 iterations
GKNV Rank Balancing Implementation
  should identify nodes eligible for balancing (equal in/out weights) (0.51ms)
  should find feasible ranks for eligible nodes (0.19ms)
  should move nodes to least crowded feasible ranks (0.33ms)
Network simplex optimization: converged in 1 iterations
  should preserve rank assignment cost during balancing (0.32ms)

Network simplex optimization: converged in 2 iterations
Rank assignments:
  Research: 0
  Database/API/Infrastructure: 1/1/1
  Backend/Frontend: 2/2
  Integration: 3
  Deployment: 4
Edges in graph:
  integration -> deployment
  frontend -> integration
  backend -> integration
  api -> frontend
  api -> backend
  database -> backend
  research -> infrastructure
  research -> api
  research -> database
GKNV Rank Assignment for Hierarchical DAG Structure
  should assign proper hierarchical ranks to complex dependency graph (1.80ms)
Network simplex optimization: converged in 1 iterations
  should have network simplex converge for simple dependency chain (0.30ms)
Network simplex optimization: converged in 1 iterations
  should preserve all edge direction constraints in rank assignment (0.52ms)

dag-draw-rank
  simple cycle detection
    should detect no cycles in acyclic graph (0.08ms)
    should detect cycles in cyclic graph (0.06ms)
    should break cycles using GKNV DFS edge classification (0.12ms)
Network simplex optimization: converged in 1 iterations
  rank assignment
    should assign ranks to simple linear graph (38.05ms)
Network simplex optimization: converged in 1 iterations
    should handle parallel branches (1.01ms)
Network simplex optimization: converged in 1 iterations
    should break cycles before ranking (0.74ms)
Network simplex optimization: converged in 1 iterations
    should set max rank (0.59ms)
  rank normalization
    should normalize ranks to start from 0 (0.23ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  integration with layout pipeline
    should work with main layout function (1.55ms)

Region-based spline routing with obstacle avoidance
  obstacle detection for spline paths
    should detect node boundaries as obstacles in spline routing (0.14ms)
  spline path planning with obstacle avoidance
    should plan spline paths that avoid node obstacles (0.10ms)
SPLINE-GEN: Creating inter-rank spline for source->target
SPLINE-GEN: Edge source->target generated 18 spline points
  SPLINE-COORDS: Start: (10.0,20.0) End: (90.0,80.0)
  region-based spline generation
    should generate smooth splines that respect regional constraints (0.80ms)

dag-draw-render
  SVG rendering
    should produce valid SVG output (0.41ms)
    should include arrow markers in SVG (0.23ms)
    should handle edge labels in SVG (0.14ms)
    should escape XML special characters (0.04ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (50,50) to (151,153)
Grid size: 111x108
  ASCII rendering
    should produce ASCII art output (0.88ms)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,100) to (104,103)
Grid size: 20x10
    should use box-drawing characters (0.13ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 0 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
    should handle empty graphs gracefully (0.50ms)
  DOT format rendering
    should produce valid DOT output (0.15ms)
    should handle edge labels in DOT (0.06ms)
    should escape DOT special characters (0.03ms)
  graph bounds calculation
    should calculate correct bounds for positioned nodes (0.14ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node root: (5.0,0.0) rank=0
  Node left: (5.0,3.0) rank=1
  Node right: (20.0,3.0) rank=1
  Node leaf: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (25,9)
Grid size: 30x14
  integration with full pipeline
    should render complete laid-out graphs (1.94ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
    should handle graphs with splines  Expected `(dag-draw-edge-spline-points edge)' to be non-nil, but instead it was nil. (0.78ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (9,3)
Grid size: 20x10
  utility functions
    should handle file saving (0.78ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 0 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  error handling and edge cases
    should handle empty graphs (0.53ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (9,3)
Grid size: 20x10
    should handle nodes without coordinates (0.70ms)
    should handle graphs with only nodes (0.23ms)

Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (13,3)
Grid size: 20x10

=== SINGLE NODE TEST (NO EDGES) ===
┌──────────┐        
│TestNode  │        
└──────────┘        
                    
                    
                    
                    
                    
                    
                    
====================================
DIAGNOSIS: ────── pattern comes from NODE BOX rendering!
Root Cause Analysis
  Node box horizontal line investigation
    should identify if ────── comes from node boxes vs edges (0.63ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (6,6)
Grid size: 20x11

=== LINE-BY-LINE ANALYSIS ===
Line 4 contains arrows: ’┌─▼─┐               ’
==============================
  Edge vs Node boundary pattern analysis
    should show where exactly the excessive lines appear (0.84ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node dest1: (5.0,3.0) rank=1
  Node dest2: (20.0,3.0) rank=1

=== COORDINATE CONVERSION DEBUG ===
Edge 1 - World coords: from(38.00,19.00) to(50.00,3.00)
Edge 1 - Grid coords: from(38,19) to(50,3)
Edge 2 - World coords: from(38.00,19.00) to(35.00,3.00)
Edge 2 - Grid coords: from(38,19) to(35,3)
PROBLEM: Both edges map to SAME grid coordinates (38,19)!
====================================
  Coordinate conversion debugging
    should show world vs grid coordinate mapping (0.99ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node parent: (5.0,0.0) rank=0
  Node child: (5.0,3.0) rank=1
=== SIDE-CENTERED PORT TEST ===
Parent node: center=(100.0, 50.0)
Child node: center=(100.0, 150.0)
From port: (100.0, 60.0)
To port: (100.0, 140.0)
==================================
GKNV-compliant side-centered port selection
  basic side-centered connection preference
    should prefer side-center over corner connections for clean aesthetics (0.91ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (100,50) to (106,153)
Grid size: 20x108
=== CLEAN VERTICAL CONNECTION TEST ===
┌────────┐          
│Source  │          
└────────┘          
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
     │              
┌────▼───┐          
│Target  │          
└────────┘          
                    
                    
                    
                    
                    
=====================================
    should render clean vertical connections like the good API Design example (18.88ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node left-node: (5.0,0.0) rank=0
  Node right-node: (5.0,3.0) rank=1
=== HORIZONTAL SIDE-CENTERED TEST ===
Left node: center=(50.0, 100.0)
Right node: center=(150.0, 100.0)
From port: (93.3, 100.0)
To port: (103.3, 100.0)
====================================
horizontal side-centered connections
  should prefer left/right side-centers for horizontal edges (2.08ms)

Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (60,15)
Grid size: 65x20

=== COMPLEX OVERLAP TEST ===
┌──────────┐                                                     
│Research  │                                                     
└───────────────────────│──────────────────────│                 
┌──────▼─────┐ ┌────────▼────────┐ ┌───────────▼──────────┐      
│API Design  │ │Database Design  │ │Infrastructure Setup  │      
└────────────│──────────────────────────│─────────────────┘      
┌────────────▼───────────┐ ┌────────────▼────────────┐           
│Backend Implementation  │ │Frontend Implementation  │           
└──────────│─────────────────────────────────────────┘           
┌──────────▼──────────┐                                          
│Integration Testing  │                                          
└──────│──────────────┘                                          
┌──────▼─────┐                                                   
│Deployment  │                                                   
└────────────┘                                                   
                                                                 
                                                                 
                                                                 
                                                                 
                                                                 
=============================

Simple Node Overlap Test
  should not have overlapping nodes that hide text (181.61ms)

Size-Aware Vertex Ordering - TDD
  Size-Aware Median Calculation
    should calculate basic weighted median without size information (0.10ms)
    should adjust median positions to prevent overlaps with size information (0.16ms)
  Size-Aware Position Calculation
    should calculate median position considering node sizes (0.36ms)
  Size-Aware Rank Ordering
    should order nodes within rank considering sizes to prevent overlaps (0.28ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
  Integration with Main Ordering Algorithm
    should integrate size-aware ordering into main vertex ordering (1.03ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (5.0,3.0) rank=1

=== DEBUG COORDINATES ===
Research coords: (5, 0) size: (80.0, 20.0)
Database coords: (5, 3) size: (80.0, 20.0)
Graph bounds: min-x=-35.0 min-y=-10.0 max-x=45.0 max-y=13.0
Research Y calc: world-y=0 grid-center-y=20.0 grid-height=40 grid-y=0.0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (13,6)
Grid size: 20x11

=== ACTUAL OUTPUT ===
┌──────────┐        
│Research  │        
└─────│────┘        
┌─────▼────┐        
│Database  │        
└──────────┘        
                    
                    
                    
                    
                    
=====================

Spacing Debug Tests
  should debug simple graph coordinates and rendering (1.32ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node db-design: (20.0,3.0) rank=1
  Node api-design: (5.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (35,9)
Grid size: 40x14
=== SPECIFIC PATTERN TEST ===
┌──────────┐                            
│Research  │                            
└───────────────────────│               
┌──────▼─────┐ ┌────────▼────────┐      
│API Design  │ │Database Design  │      
└────│───────────────────────────┘      
┌────▼────┐                             
│Backend  │                             
└─────────┘                             
                                        
                                        
                                        
                                        
                                        
============================
Specific Problematic Patterns
  should not place junction characters directly adjacent to box borders (19.14ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node A: (5.0,0.0) rank=0
  Node B: (5.0,3.0) rank=1
SPLINE-GEN: Creating inter-rank spline for A->B
SPLINE-GEN: Edge A->B generated 18 spline points
  SPLINE-COORDS: Start: (5.0,10.0) End: (5.0,-7.0)

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
dag-draw spline integration for ASCII
  spline data utilization
    should use spline points when available for smoother routing (2.66ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node START: (5.0,0.0) rank=0
  Node END: (5.0,3.0) rank=1
SPLINE-GEN: Creating inter-rank spline for START->END
SPLINE-GEN: Edge START->END generated 18 spline points
  SPLINE-COORDS: Start: (5.0,10.0) End: (5.0,-7.0)
  spline sampling for ASCII grid
    should sample spline curves appropriately for ASCII character grid (2.59ms)

Spline Length Integration into Mainline
  should have spline-length function available for utility calculations (0.04ms)
  should calculate length of simple spline (0.14ms)
SPLINE-GEN: Creating inter-rank spline for a->b
SPLINE-GEN: Edge a->b generated 18 spline points
  SPLINE-COORDS: Start: (0.0,10.0) End: (100.0,40.0)
  should be used in mainline spline processing when length calculation is needed (0.73ms)

dag-draw-splines
  point and curve structures
    should create points correctly (0.08ms)
    should create Bézier curves correctly (0.08ms)
  edge classification
    should classify inter-rank edges (0.06ms)
    should classify flat edges (0.05ms)
    should classify self edges (0.04ms)
  node port calculation
    should calculate top port correctly (0.08ms)
    should calculate all four ports correctly (0.13ms)
  Bézier curve mathematics
    should calculate points on curve correctly (0.19ms)
    should sample curve points correctly (0.16ms)
  spline creation
    should create downward inter-rank splines (0.63ms)
    should create horizontal flat splines (0.20ms)
    should create self-edge loops (0.14ms)
SPLINE-GEN: Creating self spline for c->c
SPLINE-GEN: Edge c->c generated 18 spline points
  SPLINE-COORDS: Start: (230.0,150.0) End: (230.0,150.0)
SPLINE-GEN: Creating flat spline for b->c
SPLINE-GEN: Edge b->c generated 9 spline points
  SPLINE-COORDS: Start: (130.0,150.0) End: (170.0,150.0)
SPLINE-GEN: Creating inter-rank spline for a->b
SPLINE-GEN: Edge a->b generated 18 spline points
  SPLINE-COORDS: Start: (50.0,60.0) End: (100.0,140.0)
  full spline generation
    should generate splines for all edge types (1.03ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (5.0,6.0) rank=2
SPLINE-GEN: Creating inter-rank spline for b->c
SPLINE-GEN: Edge b->c generated 27 spline points
  SPLINE-COORDS: Start: (5.0,13.0) End: (5.0,-4.0)
SPLINE-GEN: Creating inter-rank spline for a->b
SPLINE-GEN: Edge a->b generated 27 spline points
  SPLINE-COORDS: Start: (5.0,10.0) End: (5.0,-7.0)
  integration with full pipeline
    should work with complete layout pipeline (2.76ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1
  Node c: (5.0,6.0) rank=2
    should handle complex graph with cycles  Expected `(dag-draw-edge-spline-points edge)' to be non-nil, but instead it was nil. (1.88ms)
  utility functions
    should calculate spline bounds correctly (0.26ms)
    should calculate approximate spline length (0.11ms)

SVG Output Renderer
  dag-draw-render-svg function
    should position nodes correctly with text labels (0.32ms)
    should produce proportional layout matching ASCII rendering (0.21ms)

Level 0: Basic Grid Verification
  should place character at grid coordinate (0,0) (0.04ms)
FIXED GRID OUTPUT: ’          
          
     Y    
          
          ’
  should place character at grid coordinate (5,2) (0.04ms)
MULTI-GRID OUTPUT: ’  A     
    B   
        
 C      ’
  should place multiple characters at known coordinates (0.06ms)

Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (9,3)
Grid size: 20x10
Level 1: Node Position Discovery
  should discover actual node text coordinates in rendered grid (0.78ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (9,3)
Grid size: 20x10
  should find node box boundaries in rendered output (0.74ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node node1: (5.0,0.0) rank=0
  Node node2: (20.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (25,3)
Grid size: 30x10
  should identify relative positions of two nodes (0.91ms)

Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (9,3)
Grid size: 20x10
Level 2: Node Boundary Mapping
  should map exact coordinates of node boundaries (0.71ms)
Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (9,3)
Grid size: 20x10
  should verify box character positions (0.70ms)

HORIZONTAL LINE OUTPUT: ’          
  ─────   
          ’
Level 3: Two-Point Connection
  should draw horizontal line between known coordinates (0.05ms)
VERTICAL LINE OUTPUT: ’     
  │  
  │  
  │  
  │  
     
     
     ’
  should draw vertical line between known coordinates (0.04ms)
L-SHAPE OUTPUT: ’        
 ────│  
     │  
     │  
        
        ’
  should connect two specific grid points with L-shape (0.04ms)

Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node test: (5.0,0.0) rank=0
Level 4: Port Position Verification
  should calculate port positions on node boundaries (0.59ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node source: (5.0,0.0) rank=0
  Node target: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
  should verify port positions align with node boundaries (0.96ms)

COORDINATE CONVERSION: world=(100.0,50.0) -> grid=(15.0,8.0)
Level 5: Coordinate System Verification
  should verify world-to-grid coordinate conversion accuracy (0.07ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (6,6)
Grid size: 20x11
  should verify coordinate conversion produces expected visual results (0.93ms)

Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node node1: (5.0,0.0) rank=0
ASCII-CONTEXT: offset-x=25.0 offset-y=10.0
ASCII-CONTEXT: original bounds (-25.0,-10.0,35.0,10.0) → ascii bounds (0.0,0.0,60.0,20.0)

=== LEVEL 1: SINGLE NODE ===
ASCII bounds: (0 0 60.0 20.0)
Issues found: nil
Progressive Coordinate Verification
  Level 1: Single Node - Coordinate Baseline (0.66ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node node1: (5.0,0.0) rank=0
  Node node2: (5.0,3.0) rank=1
ASCII-CONTEXT: offset-x=25.0 offset-y=10.0
ASCII-CONTEXT: original bounds (-25.0,-10.0,35.0,13.0) → ascii bounds (0.0,0.0,60.0,23.0)

=== LEVEL 2: TWO NODES ===
ASCII bounds: (0 0 60.0 23.0)
Spline coords: nil
Issues found: nil
  Level 2: Two Nodes - Basic Edge Tracking (0.96ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=3 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node root: (5.0,0.0) rank=0
  Node branch1: (5.0,3.0) rank=1
  Node branch2: (20.0,3.0) rank=1
ASCII-CONTEXT: offset-x=31.7 offset-y=10.0
ASCII-CONTEXT: original bounds (-31.7,-10.0,56.7,13.0) → ascii bounds (0.0,0.0,88.3,23.0)

=== LEVEL 3: THREE NODES (BRANCHING) ===
ASCII bounds: (0 0 88.33333333333334 23.0)
Issues found: nil
Width per node: 29.4
  Level 3: Three Nodes - Simple Branching (1.18ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node start: (5.0,0.0) rank=0
  Node mid1: (5.0,3.0) rank=1
  Node mid2: (20.0,3.0) rank=1
  Node end: (5.0,6.0) rank=2
ASCII-CONTEXT: offset-x=25.0 offset-y=10.0
ASCII-CONTEXT: original bounds (-25.0,-10.0,50.0,16.0) → ascii bounds (0.0,0.0,75.0,26.0)

=== LEVEL 4: DIAMOND PATTERN (CONVERGENCE) ===
ASCII bounds: (0 0 75.0 26.0)
Issues found: nil
Width per node: 18.8
  Level 4: Diamond Pattern - Convergence Testing (1.43ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (1) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 15
NODE POSITIONS after complete positioning:
  Node root: (5.0,0.0) rank=0
  Node branch1: (5.0,3.0) rank=1
  Node branch2: (20.0,3.0) rank=1
  Node merge1: (5.0,6.0) rank=2
  Node final: (5.0,9.0) rank=3
ASCII-CONTEXT: offset-x=31.7 offset-y=10.0
ASCII-CONTEXT: original bounds (-31.7,-10.0,56.7,19.0) → ascii bounds (0.0,0.0,88.3,29.0)

=== LEVEL 5: FIVE NODES (MULTIPLE CONVERGENCE) ===
ASCII bounds: (0 0 88.33333333333334 29.0)
Issues found: nil
Width per node: 17.7
  Level 5: Five Nodes - Multiple Convergence (1.75ms)
Network simplex optimization: converged in 2 iterations
Crossing reduction completed: iterations=2 crossings=0 converged=t
GKNV A2: Edge crossings detected (4) - visual anomalies present
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 35
NODE POSITIONS after complete positioning:
  Node research: (5.0,0.0) rank=0
  Node database: (20.0,3.0) rank=1
  Node api: (5.0,3.0) rank=1
  Node infrastructure: (40.0,3.0) rank=1
  Node backend: (5.0,6.0) rank=2
  Node frontend: (32.0,6.0) rank=2
  Node integration: (5.0,9.0) rank=3
  Node deployment: (5.0,12.0) rank=4
ASCII-CONTEXT: offset-x=80.0 offset-y=10.0
ASCII-CONTEXT: original bounds (-80.0,-10.0,120.0,22.0) → ascii bounds (0.0,0.0,200.0,32.0)

=== LEVEL 6: EIGHT NODES (CURRENT FAILURE) ===
Raw bounds: (-80.0 -10.0 120.0 22.0)
ASCII bounds: (0 0 200.0 32.0)
Issues found: nil
Width per node: 25.0
Total width: 200.0
  Level 6: Eight Nodes - Current Failure Case (3.49ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node start: (5.0,0.0) rank=0
  Node end: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (10,6)
Grid size: 20x11
Integration: Full Edge Drawing
  should draw complete edge between two nodes after all fixes (0.93ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node a: (5.0,0.0) rank=0
  Node b: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
=== SIMPLE 2-NODE DEBUG ===
┌────────┐          
│Node A  │          
└────│───┘          
┌────▼───┐          
│Node B  │          
└────────┘          
                    
                    
                    
                    
                    
===========================
Gap between box bottom and edge start: -4 lines
Simple Edge Connectivity Debug
  should connect edges directly to node boundaries (1.07ms)

Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node top: (5.0,0.0) rank=0
  Node bottom: (5.0,3.0) rank=1

=== ASCII-NATIVE RENDERING ===
Grid bounds: (5,0) to (11,6)
Grid size: 20x11
=== PORT CALCULATION DEBUG ===
┌─────┐             
│Top  │             
└────│┘             
┌────▼───┐          
│Bottom  │          
└────────┘          
                    
                    
                    
                    
                    
==============================
Top box ends at line: 5
Bottom box starts at line: nil
Connecting line at: nil
Port Calculation Debug
  should show where ports are calculated for simple graph (1.20ms)

Network simplex failed (GKNV tight tree expansion failed to converge after 1 iterations), falling back to topological ordering
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node node1: (5.0,0.0) rank=0
ASCII-CONTEXT: offset-x=25.0 offset-y=10.0
ASCII-CONTEXT: original bounds (-25.0,-10.0,35.0,10.0) → ascii bounds (0.0,0.0,60.0,20.0)

=== LEVEL 1: SINGLE NODE ===
Raw bounds: (-25.0 -10.0 35.0 10.0)
ASCII bounds: (0 0 60.0 20.0)
Progressive Coordinate Verification - Simple
  Level 1: Single Node - Coordinate Baseline (0.86ms)
Network simplex optimization: converged in 1 iterations
Crossing reduction completed: iterations=1 crossings=0 converged=t
GKNV positioning enhancement iteration 1
GKNV positioning enhancement iteration 2
GKNV positioning enhancement iteration 3
GKNV positioning enhancements completed. Final width: 0
NODE POSITIONS after complete positioning:
  Node node1: (5.0,0.0) rank=0
  Node node2: (5.0,3.0) rank=1
ASCII-CONTEXT: offset-x=25.0 offset-y=10.0
ASCII-CONTEXT: original bounds (-25.0,-10.0,35.0,13.0) → ascii bounds (0.0,0.0,60.0,23.0)

=== LEVEL 2: TWO NODES ===
Raw bounds: (-25.0 -10.0 35.0 13.0)
ASCII bounds: (0 0 60.0 23.0)
  Level 2: Two Nodes - Basic Edge Tracking (1.16ms)

Ran 474 specs, 25 failed, in 9.80s.
25 Buttercup tests failed
